{% extends 'record/base.html' %}
{% load static %}
{% load staticfiles %}
{% block content %}
<br><br><br>

<div class = "post" style="color:white">
 
    <div class = "left">
        <br>
        <p>Category : {{ post.category }}</p>
        <h3 style="font-size : 40px;">{{ post.title }}</h3>
        {% if post.file%}
    <p>File : <a id="id_uploaded_file" href="{{ post.file.url }}" download>{{ post.file }}</a></p>
    <P><img src = "{{post.file.url}}" alt=""></P>
        {% endif %}
        <p style="display : inline-block; width: 500px;">{{ post.text }}</p>
    </div>

    <div class = "right">
        <br><br><br>
        <p> 작성자 : {{post.name_id}}</p>
        <p> 작성일 : {{ post.created_at }}</p>
        <p> 수정일 : {{ post.updated_at }}</p>
        
    <br><br><br> <div style = "margin-left : 100px;">
    <a href="{% url 'main' %}">Back</a>
    <a href="{% url 'post_edit' post.id %}">Edit</a>
    <a href="{% url 'post_delete' post.id %}" onclick="return confirm('정말로 삭제하시겠습니까?');">Delete</a>
    </div>
</div>
    

<br style="line-height:200px">

   
<hr>

    <p>댓글 {{ post.comment_set.count }}개</p>

    
        {% for comment in post.comment_set.all%}
            <div class="container" style="background-color: rgba( 255, 255, 255, 0.5 )">
                <p>{{comment.name_id}}  :  {{comment.text}}</p>
                <p class="float-right">{{comment.created_at}}</p>
                <br>
                <br>
                <a href="{% url 'comment_delete' post.id comment.id  %}" class = "btn btn-warning float-right" role="button">Delete</a>
                
            </div>
            {% for recomment in comment.recomment_set.all%}
                <div class="container" style="color:white; background-color: rgba( 255, 255, 255, 0.5 )">
                    <p>    ㄴ{{recomment.name_id}}  :  {{recomment.text}}</p>
                    <p class="float-right">{{comment.created_at}}</p>
                    <br>
                    <br>
                    <a href="{% url 'recomment_delete' post.id comment.id recomment.id %}" class = "btn btn-warning float-right" role="button">Delete</a>
                </div>
            {% endfor %}
            <br>
            <br>



            <button data-toggle="collapse" data-target="#recomment" class = "btn btn-info">Recomment</button>
            
            <div id="recomment" class="collapse border-0" style="background-color:transparent">
                <div class="card card-body border-0" style="background-color:transparent">
                    <form action='{% url 'recomment_new' post.id comment.id %}' method = 'post'>
                        {% csrf_token %}
                            <table margin = >
                                {{ form.as_table }}
                            </table>
                            <input type='submit' value='Save' class = "btn btn-info">
                    </form>

                </div>
            </div>
    {% empty %}
        <p>Comment here</p>
    {% endfor %}

    <br>
    <br>
    <br>
    <hr>
    <br>
    <br>
    <p>댓글 작성</p>
    <form action='{% url 'comment_new' post.id %}' method = 'post'>
        {% csrf_token %}
        <table margin = >
            {{ form.as_table }}
        </table>
        <input type='submit' value='Save' class = "btn btn-info float-right">
    </form>

    {% comment %} <input class="form-control form-control-lg" type="text" placeholder=".form-control-lg"> {% endcomment %}

{% endblock %}