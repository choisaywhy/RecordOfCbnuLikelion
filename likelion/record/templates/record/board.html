{% extends 'record/base.html' %}
{% block content %}
<div class="post" style="color:white">
    <h3>{{ category.name }}</h3>
    <a href="{% url 'post_new' %}"> New </a>
    <a href="{% url 'main' %}">main</a>
    <table class="table" style="color:white">
        <thead>
            <tr>
                <th>category</th>
                <th>title</th>
                <th>writer</th>
                <th>date</th>
            </tr>
        </thead>
        <tbody>

        {% for post in posts %}
            {% if post.category == category%}    
                <tr>
                    <td>{{ post.category }}</td>
                    <td><a href="{% url 'post_detail' post.id  %}">{{ post.title }} [{{ post.comment_set.count }}]</a></td>
                    <td>{{ post.name_id }}</td>
                    {% comment %} 유저이름 추가하기 {% endcomment %}
                    <td>{{ post.created_at }}</td>
                    {% comment %} 올린시간 추가하기 {% endcomment %}
                </tr>
            {% endif %}
        {% endfor %}
            <nav>
            {% comment %} 페이지네이션 {% endcomment %}
                <ul class="pagination">
                    {% if posts.has_previous %}
                        <li>
                            <a href="?page={{ posts.previous_page_number }}">
                                <span>Prev</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="disabled">
                            <a href="#">
                                <span>Prev</span>
                            </a>
                        </li>
                    {% endif %}

                    {% for page in paginator.page_range %}
                        <li {% if .posts.number == page %}class="active"{% endif %}>
                            <a href="?page={{ page }}">{{ page }}</a>
                        </li>
                    {% endfor %}

                    {% if posts.has_next %}
                        <li>
                            <a href="?page={{ posts.next_page_number }}">
                                <span>Next</span>
                            </a>
                        </li>
                    {% else %}
                        <li {% if not posts.has_next %}class="disabled"{% endif %}>
                            <a href="#">
                                <span>Next</span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </nav>

        </tbody>
    </table>

</div>

{% endblock content %}